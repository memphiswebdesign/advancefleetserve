<div id="brandtForm"></div>
<div id="intakeForm">
    <div class="container py-5">
        <h2>Talk to a Specialist</h2>
        <p class="mb-5">Have a question or need help finding what's right for you? Our experienced specialists are available to help!</p>
        <div id="free-class-form">
          <form name="contact" method="POST" netlify netlify-honeypot="bot-field" data-netlify="true" id="free-form">
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="name">First & Last Name</label>
                <input type="text" class="form-control" id="name" name="name" placeholder="Enter your full name" required>
              </div>
              <div class="form-group col-md-6">
                <label for="email">Email Address</label>
                <input type="email" class="form-control" id="email" name="email" placeholder="you@mail.com" required>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="phone">Phone Number</label>
                <input type="tel" class="form-control" id="phone" name="phone" placeholder="(901) 123-4678" required>
              </div>
              <div class="form-group col-md-6">
                <label for="company">Company Name</label>
                <input type="text" class="form-control" id="company" name="company" placeholder="Comapny name" required>
              </div>
            </div>
            <button type="submit" class="mt-2 btn btn-primary btn-block">Submit</button>
          </form>
        </div>
        <!-- #free-class-form -->
        <div id="free-thanks" class=" text-center px-3 py-5" style="display: none;">
          <img class="thanks-logo" src="{{site.baseurl}}/assets/img/logo.svg" alt="Brandt" />
          <h5 class="white-color" id="hi">Hey, <span id="hi-name"></span> <span class="emoji-wave">ðŸ‘‹</span></h5>
          <p class="white-color">Thanks for contacting us. An AFS team member will reach out very soon.</p>
        </div>
    </div>
</div>

<style>
  #free-thanks {
    background: rgba(0,0,0,.2);
    backdrop-filter: blur(5px);
    border-radius: 10px;
    border: 2px solid #0ccf0c;
  }
  .thanks-logo {
    width: 80%;
    max-width: 380px;
    margin: 0 0 2em 0;
  }
</style>

<script>
  document.getElementById("free-form").addEventListener("submit", function(event) {
      event.preventDefault(); // Prevent the default form submission

      const formData = new FormData(this);
      const userName = formData.get("name"); // Get the value of the "name" input

      // Update #hi-name with the captured name
      if (userName) {
          document.getElementById("hi-name").textContent = userName;
      }

      // Simulate a successful Netlify form submission
      fetch("/", {
          method: "POST",
          body: formData,
      })
      .then(() => {
          // Hide the form
          document.getElementById("free-class-form").style.display = "none";
          // Show the thank you message
          document.getElementById("free-thanks").style.display = "block";

          // Scroll to #free with an 80px offset
          scrollToAnchor("free", 80);
      })
      .catch((error) => console.error("Error:", error));
  });

  // Smooth scroll function with offset
  function scrollToAnchor(anchorId, offset) {
      const pageFree = document.getElementById(anchorId);
      if (pageFree) {
          const targetPosition = pageFree.getBoundingClientRect().top + window.scrollY - offset;
          window.scrollTo({
              top: targetPosition,
              behavior: "smooth"
          });
      }
  }

</script>